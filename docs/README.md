# 2단계

### 상품 구매

- [x] 상품 구매 페이지에서 최초 충전 금액은 0 원이다
- [x] 반환된 각 동전의 개수는 0개이다.

- [x] 사용자가 투입할 금액을 입력한 후 투입하기 버튼을 이용하여 금액을 투입한다

  - [x] 투입할 금액은 10으로 나누어 떨어져야 한다
  - [x] 투입할 금액은 최소 10이상 최대 10,000원 이하여야 한다.

- [x] 현재 투입한 금액을 확인할 수 있다.
- [x] 금액이 투입됐다면 snackbar로 이를 유저에게 알린다
- [x] 금액은 누적으로 투입할 수 잇다

- [x] 사용자가 구입버튼을 누른 상품 금액보다 투입 금액이 적은 경우 snackbar로 구매불가를 알린다
- [x] 사용자가 구입버튼을 누른 상품의 수량이 0일 경우 snackbar로 매진임을 알린다
- [x] 사용자가 성공적으로 구입을 하였을 때에, 투입한 금액과 클릭된 상품의 수량이 변한다.
- [x] 사용자가 구입버튼을 눌렀을 때에 해당 행위가 정상적으로 동작하거나 실패하였음을 snackbar를 통해 보여준다

- [x] 사용자가 반환하기 버튼을 통해 잔돈을 반환할 수 있다.

  - [x] 잔돈을 돌려줄 때에는 현재 보유한 최소 개수의 동전으로 돌려준다
  - [x] 지폐로 잔돈을 반환하는 경우는 없고 동전을 통해서만 잔돈을 반환해야한다
  - [x] 잔돈으로 반환할 금액보다 자판기 보유한 잔돈 량이 더 적을 경우 반환 할 수 있는 금액만 반환한다.

- [x] 잔돈을 반환할 때 snackbar를 사용해 잔돈이 반환되었음을 유저에게 알린다

### 관리자 회원 기능

- [x] 관리자의 회원 가입을 위한 기능은 json-server-auth를 이용한다.

- [x] 로그인 버튼을 클릭하면, 로그인 화면으로 이동한다.
- [x] 회원가입 링크를 클릭하면, 회원가입 화면으로 이동한다.
- [x] 회원정보 버튼을 클릭하면, 회원정보 수정 화면으로 이동한다.

- [x] 관리자가 되고자 하는 유저는 회원 가입을 할 수 있다.

  - [x] 이메일은 형식에 맞아야 한다
  - [x] 유저의 이름은 2 ~6글자여야 한다
  - [x] password는 최소 8글자 이상 최대 20자 이하여야 한다.
  - [x] password는 영소문자와 숫자,특수 기호로 이루어져야 한다.
  - [x] password는 특수 기호를 최소 하나를 가지고 있어야 한다.

- [x] 유저가 입력한 값을 토대로 json-server-auth에 요청을 보내 유저 정보를 등록한다
- [x] json-server-auth에서 보내준 sessionToken값을 localStorage에 저장한다
- [x] 회원 가입 후에는 로그인 한 상태로 상품구매 화면으로 페이지를 이동한다

- [x] 관리자는 로그인할 수 있다.

  - [x] 로그인하고 나면 로그인 버튼은 로그아웃 버튼으로 변경되어야 한다.
  - [x] 로그인하지 않은 유저에게는 로그인 외 다른 관리 기능 버튼은 보이지 않는다.
  - [x] 로그인에 실패할 경우 유저에게 이를 알린다

- [x] 로그인한 유저의 이름중 첫번째 글자를 썸네일처럼 만든다
- [x] 로그인한 유저의 썸네일을 클릭하면 select box로 회원 정보 수정과 로그 아웃 메뉴를 만든다

- [x] 로그인한 유저만, 정보의 수정이 가능하다.

  - [x] 회원정보 수정 버튼을 클릭하면 회원정보 화면으로 이동한다
  - [x] 회원정보 수정시 유저의 이름과 비밀번호는 앞선 규칙을 충족해야 한다
  - [x] 회원정보 수정에서 보여지는 이메일은 회원의 이메일 주소로 하고, 수정할 수 없도록 한다.
  - [x] 회원정보 수정을 완료하면, 홈 화면으로 이동한다

- [x] 관리자는 로그 아웃 할 수 있다.
- [x] 관리자가 로그 아웃 할 경우 localStorage의 accessToken과 userId를 지운다
- [x] 관리자가 로그 아웃 한 후에는 로그인 버튼으로 변경 되어야 한다

### 테스트 요구사항

- [x] 사용자 입장에 대한 테스트를 Cypress로 작성한다.

- [x] 잔돈을 반환하지 않는 경우에 대하여 cypress로 테스트를 작성한다

# 1단계

## 🎯 요구사항 - 관리자 기능

### 1) 공통 : 도메인 영역을 타입스크립트를 이용하여 구현한다.

- [x] Interface 또는 type을 이용하여, 주요 도메인 객체의 타입을 정의하고 설계한다.

  - [x] product의 type, interface를 정의한다

  - [x] CoinWallet, InputCharge의 type을 정의한다.

  - [x] vendingMachine의 type을 정의한다.

### 2) 도메인 개발

- [x] CoinWallet 도메인 개발

- [x] Product 도메인 개발

### 3) 라우팅 기능

- [x] Browser Hash를 이용하여 SPA처럼 라우팅을 적용한다.

- [x] 매번 페이지를 로드 하는 것이 아닌, 히스토리를 관리하고, 페이지를 url에 따라 동적으로 렌더링한다

- [x] 상품 관리, 잔돈 충전, 상품 구매 페이지는 모두 동적으로 렌더링해야 한다.

### 4) 상품 관리 탭 : 상품 관리탭은 자판기가 보유하고 있는 상품을 추가하는 기능을 수행한다.

- [x] 최초 접근 시 보여지는 탭은 상품 관리 탭이다.

- [x] 최초 상품 목록은 비워진 상태이다.

- [x] 상품명, 가격, 수량을 입력해 상품을 추가할 수 있다.

  - [x] 예외사항 : 상품 이름은 최대 10글자까지 가능하다.

  - [x] 예외사항 : 상품 이름은 비어 있을 수 없다.

  - [x] 예외사항 : 상품 가격은 최소 100원 ~ 최대 10,000원 이다.

  - [x] 예외사항 : 상품 가격은 10원으로 나누어 떨어져야 한다.

  - [x] 예외사항 : 상품 수량은 최소 0개 ~ 최대 20개까지 넣을 수있다.

- [x] 관리자는 추가한 상품을 확인할 수 있다.

- [x] 관리자는 추가한 상품을 수정, 삭제할 수 있다.

- [x] 수정 시 상품명, 가격, 수량 정보 영역 자체가 인풋 영역으로 변경된다.

- [x] 삭제 시 confirm을 활용하여 사용자에게 다시 한번 확인한다.

### 5) 잔돈 충전 탭 : 잔돈 충전탭은 자판기가 보유할 금액을 충전하는 기능을 수행한다.

- [x] 잔돈 충전 탭에서 최초 자판기가 보유한 금액은 0원이며, 각 동전의 개수는 0개이다.

- [x] 잔돈 충전 입력 요소에 충전할 금액을 입력한 후, 충전하기 버튼을 눌러 자판기 보유 금액을 충전할 수 있다.

  - [x] 예외사항 : 잔돈은 10원으로 나누어 떨어지는 금액만 투입할 수 있다.

  - [x] 예외사항 : 보유할 수 있는 최대 금액은 100,000원이다.

  - [x] 예외사항 : 음수는 입력될 수 없다.

- [x] 자판기 보유 금액만큼의 동전이 무작위로 생성된다.

- [x] 자판기 보유 금액을 누적하여 충전할 수 있다. 추가 충전 금액만큼의 동전이 무작위로 생성되어 기존 동전들에 더해진다.

### 테스트 요구사항

- [x] 비즈니스 로직에 대한 단위 테스트를 Jest로 작성한다.

  - [x] coinWallet에 대한 테스트를 작성한다.

  - [x] product에 대한 테스트를 작성한다.

- [x] 사용자 플로우에 대한 통합 테스트를 cypress로 작성한다.

  - [x] 상품을 관리할 수 있다에 대한 테스트를 작성한다.

  - [x] 자판기에 잔돈을 충전할 수 있다에 대한 테스트를 작성한다.
